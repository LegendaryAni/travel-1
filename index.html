<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¸­å±±åŠæ½­ï½œä¸€æ—¥ç²¾æº–è¡Œç¨‹ (Romantic)</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        serif: ['"Playfair Display"', 'serif'],
                        sans: ['"Noto Sans TC"', 'sans-serif'],
                    },
                    colors: {
                        roseGold: '#eec1be',
                        warmWhite: '#fafaf9',
                    },
                    boxShadow: {
                        'soft': '0 10px 40px -10px rgba(244, 63, 94, 0.2)',
                        'inner-light': 'inset 0 2px 4px 0 rgba(255, 255, 255, 0.6)',
                        'upwards': '0 -4px 20px rgba(0,0,0,0.05)',
                    }
                }
            }
        }
    </script>
    
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&family=Playfair+Display:ital,wght@0,400;0,600;0,700;1,400&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #fff1f2;
            color: #57534e;
            overflow-x: hidden;
            scroll-behavior: smooth;
        }

        /* Romantic Background */
        .romantic-bg {
            position: fixed;
            top: 0; left: 0; width: 100vw; height: 100vh;
            z-index: -10;
            background: linear-gradient(135deg, #fff1f2 0%, #fff7ed 100%);
        }
        .romantic-bg::before {
            content: ''; position: absolute; top: -10%; right: -10%; width: 60vw; height: 60vw;
            background: radial-gradient(circle, rgba(254, 205, 211, 0.4) 0%, transparent 60%);
            filter: blur(60px); animation: float 10s infinite ease-in-out;
        }
        .romantic-bg::after {
            content: ''; position: absolute; bottom: -10%; left: -10%; width: 60vw; height: 60vw;
            background: radial-gradient(circle, rgba(253, 186, 116, 0.3) 0%, transparent 60%);
            filter: blur(60px); animation: float 15s infinite ease-in-out reverse;
        }

        @keyframes float {
            0%, 100% { transform: translate(0, 0); }
            50% { transform: translate(20px, 20px); }
        }

        /* Timeline Line */
        .timeline-line {
            position: absolute; left: 28px; top: 24px; bottom: 24px; width: 2px;
            background: linear-gradient(to bottom, #fda4af, #fdba74);
            z-index: 0; border-radius: 99px; opacity: 0.6;
        }
        @media (min-width: 768px) {
            .timeline-line { left: 50%; transform: translateX(-50%); }
        }

        /* Frosted Glass Cards */
        .glass-card {
            background: rgba(255, 255, 255, 0.65);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border: 1px solid rgba(255, 255, 255, 0.8);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.02), 0 2px 4px -1px rgba(0, 0, 0, 0.02);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .glass-card:hover {
            background: rgba(255, 255, 255, 0.85);
            transform: translateY(-4px);
            box-shadow: 0 20px 40px -10px rgba(244, 63, 94, 0.15);
            border-color: #fff;
        }

        /* Nav Glass */
        .nav-glass {
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-top: 1px solid rgba(255, 255, 255, 0.5);
        }

        /* Animation */
        .reveal { opacity: 0; transform: translateY(30px); transition: all 0.8s cubic-bezier(0.2, 0.8, 0.2, 1); }
        .reveal.active { opacity: 1; transform: translateY(0); }

        /* Typography */
        h1, h2, h3 { font-family: 'Playfair Display', serif; }
        
        /* Checklist */
        .checklist-item { display: flex; align-items: center; gap: 0.75rem; padding: 0.5rem 0; font-size: 0.95rem; color: #78716c; cursor: pointer; transition: color 0.2s; }
        .checklist-item:hover { color: #be123c; }
        .checklist-item input { 
            appearance: none; width: 1.1rem; height: 1.1rem; border-radius: 50%; border: 1.5px solid #d6d3d1; background: #fff; cursor: pointer; position: relative; transition: all 0.2s;
        }
        .checklist-item input:checked { background: #fda4af; border-color: #fda4af; }
        .checklist-item input:checked::after { content: ''; position: absolute; top: 3px; left: 3px; width: 8px; height: 8px; background: white; border-radius: 50%; }

        /* Tags */
        .tag-base { font-size: 0.7rem; letter-spacing: 0.05em; font-weight: 600; padding: 3px 10px; border-radius: 99px; }
        
        /* Back to top */
        #back-to-top { opacity: 0; visibility: hidden; transition: all 0.5s ease; }
        #back-to-top.show { opacity: 1; visibility: visible; }
        
        /* Nav Links */
        .nav-link { position: relative; }
        .nav-link::after {
            content: ''; position: absolute; width: 0; height: 1px; bottom: -2px; left: 0;
            background-color: #fb7185; transition: width 0.3s;
        }
        .nav-link:hover::after { width: 100%; }
        
        /* Blog Button */
        .blog-btn {
            font-size: 0.75rem; font-weight: 600;
            background-color: #fff1f2; color: #e11d48;
            padding: 4px 12px; border-radius: 99px;
            border: 1px solid #fecdd3;
            display: inline-flex; align-items: center; gap: 4px;
            transition: all 0.2s;
        }
        .blog-btn:hover { background-color: #ffe4e6; transform: translateY(-1px); box-shadow: 0 2px 4px rgba(225, 29, 72, 0.1); }
    </style>
</head>
<body class="pb-32 md:pb-24"> <div class="romantic-bg"></div>

    <nav class="bg-white/70 backdrop-blur-md sticky top-0 z-50 border-b border-white/40">
        <div class="max-w-5xl mx-auto px-4 sm:px-6">
            <div class="flex justify-between items-center h-20">
                <div class="flex items-center gap-3 cursor-pointer group" onclick="window.scrollTo(0,0)">
                    <div class="w-10 h-10 bg-gradient-to-br from-rose-300 to-rose-400 rounded-full flex items-center justify-center text-white font-serif italic text-xl shadow-soft group-hover:scale-105 transition">P</div>
                    <div>
                        <h1 class="font-bold text-lg text-stone-800 tracking-wide">ä¸­å±±åŠæ½­ç²¾æº–è¡Œç¨‹</h1>
                    </div>
                </div>

                <div class="hidden md:flex items-center gap-8 mr-6">
                    <a href="#prep" class="text-stone-600 hover:text-rose-500 font-serif text-sm nav-link transition">æº–å‚™</a>
                    <a href="#timeline" class="text-stone-600 hover:text-rose-500 font-serif text-sm nav-link transition">è¡Œç¨‹</a>
                    <a href="#food" class="text-stone-600 hover:text-rose-500 font-serif text-sm nav-link transition">åœ°åœ–</a>
                    <a href="#extras" class="text-stone-600 hover:text-rose-500 font-serif text-sm nav-link transition">å‚™æ¡ˆ</a>
                </div>

                <div class="flex items-center gap-3">
                    <button id="weather-btn" onclick="toggleWeather()" class="flex items-center gap-2 px-4 py-1.5 rounded-full text-xs font-bold bg-white text-stone-600 border border-stone-200 shadow-sm hover:shadow-md hover:text-rose-500 transition">
                        <span>â˜€ï¸ æ™´å¤©æ¨¡å¼</span>
                    </button>
                    <button onclick="copyItinerary()" class="hidden md:flex items-center gap-2 px-4 py-1.5 rounded-full text-xs font-bold bg-stone-800 text-stone-100 hover:bg-stone-700 transition shadow-lg shadow-stone-200">
                        <span>ğŸ“‹ è¤‡è£½</span>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <section id="prep" class="py-10 max-w-5xl mx-auto px-4 scroll-mt-24">
        <div class="glass-card rounded-[2rem] p-8 reveal active">
            <h2 class="text-2xl font-bold text-stone-800 mb-6 flex items-center gap-3 border-b border-stone-100 pb-4">
                <span class="text-rose-400 text-3xl">âœ¦</span> å‡ºç™¼å‰æº–å‚™
            </h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                
                <div class="bg-rose-50/50 p-5 rounded-2xl border border-rose-100">
                    <h3 class="text-rose-800 text-xs font-bold tracking-widest uppercase mb-3 font-sans">Essentials</h3>
                    <label class="checklist-item"><input type="checkbox"> ç¾é‡‘ (ç™¾å…ƒéˆ”)</label>
                    <label class="checklist-item"><input type="checkbox"> è¥ªå­ (è²“å’–è¦å®š)</label>
                    <label class="checklist-item"><input type="checkbox"> æ‚ éŠå¡</label>
                    <label class="checklist-item"><input type="checkbox"> è¡Œå‹•é›»æº</label>
                </div>

                <div class="bg-orange-50/50 p-5 rounded-2xl border border-orange-100">
                    <h3 class="text-orange-800 text-xs font-bold tracking-widest uppercase mb-3 font-sans">Outdoor</h3>
                    <label class="checklist-item"><input type="checkbox"> å¥½èµ°çš„é‹</label>
                    <label class="checklist-item"><input type="checkbox"> æ‘ºç–Šå‚˜</label>
                    <label class="checklist-item"><input type="checkbox"> è–„å¤–å¥—</label>
                </div>

                <div class="bg-stone-50/50 p-5 rounded-2xl border border-stone-100">
                    <h3 class="text-stone-600 text-xs font-bold tracking-widest uppercase mb-3 font-sans">Care</h3>
                    <label class="checklist-item"><input type="checkbox"> æ¿•ç´™å·¾/é¢ç´™</label>
                    <label class="checklist-item"><input type="checkbox"> æ°´</label>
                    <label class="checklist-item"><input type="checkbox"> è£œå¦ç”¨å“</label>
                </div>

            </div>
        </div>
    </section>

    <section id="timeline" class="py-6 max-w-5xl mx-auto px-4 scroll-mt-24">
        <div class="flex items-center justify-between mb-12 px-4 reveal">
            <h2 class="text-3xl font-bold text-stone-800 italic">Today's Journey</h2>
            <div class="text-xs font-bold text-rose-500 bg-white border border-rose-100 px-4 py-1.5 rounded-full shadow-sm font-sans">
                Sunset at 17:28
            </div>
        </div>
        <div class="timeline-container relative pb-10" id="timeline-content">
            <div class="timeline-line"></div>
            </div>
    </section>

    <section id="food" class="py-16 bg-white/40 backdrop-blur-sm border-t border-white/60 scroll-mt-20">
        <div class="max-w-6xl mx-auto px-6">
            <h2 class="text-2xl font-bold text-stone-800 mb-10 text-center italic">Discover & Navigate</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6" id="food-grid">
                </div>
        </div>
    </section>

    <section id="extras" class="py-16 border-t border-white/60 bg-gradient-to-b from-transparent to-white/30 scroll-mt-20">
        <div class="max-w-6xl mx-auto px-6">
            <div class="text-center mb-12 reveal">
                <span class="text-xs font-bold text-rose-400 tracking-[0.2em] uppercase font-sans">Pocket List</span>
                <h2 class="text-3xl font-bold text-stone-800 mt-3 italic">å‚™æ¡ˆé¸æ“‡</h2>
                <p class="text-sm text-stone-500 mt-3 font-sans font-light">å„ªé›…æ‡‰å°è¡Œç¨‹è®ŠåŒ–</p>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                
                <div class="glass-card rounded-2xl p-6 reveal relative overflow-hidden group">
                    <div class="absolute -right-2 -top-2 text-8xl text-rose-100 opacity-50 group-hover:scale-110 transition duration-700 select-none font-serif">Z</div>
                    <h3 class="text-xl font-bold text-rose-900 mb-4 flex items-center gap-3 relative z-10">
                        <span class="text-rose-400">â–</span> ä¸­å±±ç«™
                    </h3>
                    <div class="space-y-4 relative z-10" id="extra-zhongshan"></div>
                </div>

                <div class="glass-card rounded-2xl p-6 reveal relative overflow-hidden group">
                    <div class="absolute -right-2 -top-2 text-8xl text-orange-100 opacity-50 group-hover:scale-110 transition duration-700 select-none font-serif">Y</div>
                    <h3 class="text-xl font-bold text-orange-900 mb-4 flex items-center gap-3 relative z-10">
                        <span class="text-orange-400">â–</span> åœ“å±±ç«™
                    </h3>
                    <div class="space-y-4 relative z-10" id="extra-yuanshan"></div>
                </div>

                <div class="glass-card rounded-2xl p-6 reveal relative overflow-hidden group">
                    <div class="absolute -right-2 -top-2 text-8xl text-indigo-100 opacity-50 group-hover:scale-110 transition duration-700 select-none font-serif">J</div>
                    <h3 class="text-xl font-bold text-indigo-900 mb-4 flex items-center gap-3 relative z-10">
                        <span class="text-indigo-400">â–</span> åŠæ½­/å£«æ—
                    </h3>
                    <div class="space-y-4 relative z-10" id="extra-jiantan"></div>
                </div>

            </div>
        </div>
    </section>

    <div class="md:hidden fixed bottom-0 left-0 w-full nav-glass z-50 shadow-upwards pb-safe">
        <div class="flex justify-around items-center py-3">
            <a href="#prep" class="flex flex-col items-center gap-1 text-stone-400 hover:text-rose-500 transition">
                <span class="text-lg">ğŸ’</span>
                <span class="text-[10px] font-bold">æº–å‚™</span>
            </a>
            <a href="#timeline" class="flex flex-col items-center gap-1 text-stone-400 hover:text-rose-500 transition">
                <span class="text-lg">ğŸ“…</span>
                <span class="text-[10px] font-bold">è¡Œç¨‹</span>
            </a>
            <a href="#food" class="flex flex-col items-center gap-1 text-stone-400 hover:text-rose-500 transition">
                <span class="text-lg">ğŸ—ºï¸</span>
                <span class="text-[10px] font-bold">åœ°åœ–</span>
            </a>
            <a href="#extras" class="flex flex-col items-center gap-1 text-stone-400 hover:text-rose-500 transition">
                <span class="text-lg">âœ¨</span>
                <span class="text-[10px] font-bold">å‚™æ¡ˆ</span>
            </a>
        </div>
    </div>

    <footer class="text-stone-400 py-12 text-center pb-24 md:pb-12">
        <p class="text-[10px] font-sans tracking-widest uppercase mb-1">Trip Planner v15.2</p>
        <p class="text-[10px] font-serif italic text-stone-300">Updated: Fish & Salt</p>
    </footer>

    <button id="back-to-top" onclick="window.scrollTo(0,0)" class="fixed bottom-24 right-6 md:bottom-8 md:right-8 bg-white text-rose-400 p-3 md:p-4 rounded-full shadow-soft hover:shadow-lg hover:-translate-y-1 transition z-40 border border-rose-100">
        â†‘
    </button>

    <script>
        let isRainMode = false;

        // --- Data ---
        const itineraryData = [
            { start: "11:00", end: "11:10", title: "é›†åˆ & æ•´å‚™", loc: "ä¸­å±±å—è¥¿", type: "prep", action: "é€²ç™¾è²¨æ´—æ‰‹é–“æ•´ç†å„€å®¹ã€è²·æ°´ã€‚", rule: "ä¸‹åˆåªåšå°è£œï¼Œå‹¿ç©ºç­‰ã€‚", link: "ä¸­å±±å—è¥¿+ç™¾è²¨" },
            { start: "11:10", end: "11:20", title: "å‰å¾€é­šå…µè¡›", loc: "ç§»å‹•", type: "move", action: "å¾ä¸­å±±ç«™æ­¥è¡Œè‡³èµ¤å³°è¡—ã€‚", rule: "è¼•é¬†æ­¥è¡Œå³å¯ã€‚", link: "é­šå…µè¡›å¤ªæ˜¥å’Œé£Ÿè™•" },
            { start: "11:30", end: "12:30", title: "åˆé¤ï¼šé­šå…µè¡›å¤ªæ˜¥å’Œé£Ÿè™•", loc: "ä¸­å±±", type: "food", action: "èµ¤å³°è¡—å··å¼„äººæ°£æ—¥æ–™ï¼Œç”Ÿé­šç‰‡ä¸¼é£¯å¿…é»ã€‚", rule: "12:30 çµå¸³é›¢å ´ã€‚", link: "é­šå…µè¡›å¤ªæ˜¥å’Œé£Ÿè™•", blog: "https://upssmile.com/253006/yubingwei-taichunheshichu" },
            { start: "12:30", end: "13:05", title: "æ–‡è—æ¼«æ­¥ (å†·æ°£)", loc: "ä¸­å±±å‘¨é‚Š", type: "relax", action: "æ¨è–¦å»èª å“ R79 æˆ–å…‰é»å°åŒ—ã€‚", rule: "å–„ç”¨ç©ºæª”ï¼Œä¿æŒæ¶¼çˆ½ã€‚", link: "èª å“R79", recs: [{name:"èª å“R79", link:"èª å“R79"}, {name:"å…‰é»å°åŒ—", link:"å…‰é»å°åŒ—"}] },
            { start: "13:05", end: "13:25", title: "å‰å¾€ç´…ç¥", loc: "ç§»å‹•", type: "move", action: "æ…¢æ…¢èµ°åˆ°è²“å’–é™„è¿‘ã€‚", rule: "13:25 å¿…åˆ°é–€å£å¾…å‘½ã€‚", link: "ç´…ç¥ç·¬å› è²“è—å»Š" },
            { start: "13:30", end: "15:00", title: "ç´…ç¥ç·¬å› è²“è—å»Š", loc: "ä¸­å±±", type: "hard", action: "ç©¿è¥ªå­å…¥å ´ï¼Œç›¡æƒ…åš•è²“ã€‚", rule: "ç¡¬æ™‚é»ï¼Œ15:00 æº–æ™‚é›¢å ´ã€‚", link: "ç´…ç¥ç·¬å› è²“è—å»Š" },
            { start: "15:00", end: "15:30", title: "ç§»å‹•è‡³åœ“å±±", loc: "æ·é‹", type: "move", action: "ä¸­å±±ç«™â†’åœ“å±±ç«™â†’å†°å±±äº”è§’ã€‚", rule: "å¡«è£œç©ºæª”ï¼Œç›´æ¥åƒç”œé»ã€‚", link: "åœ“å±±ç«™" },
            { start: "15:30", end: "16:15", title: "å†°å±±äº”è§’", loc: "åœ“å±±", type: "food", action: "æ‚ é–’äº«ç”¨ç”œé»ã€‚", rule: "é¿é–‹å°–å³°ï¼Œç‚ºçˆ¬å±±å„²èƒ½ã€‚", link: "å†°å±±äº”è§’" },
            
            // --- åˆ†æ­§é» (Sunny vs Rain) ---
            { start: "16:15", end: "16:30", title: "ç§»å‹•è‡³åŠæ½­", loc: "æ·é‹", type: "move", action: "åœ“å±±â†’åŠæ½­â†’ç™»å±±å£ã€‚", rule: "16:30 æŠµé”ç™»å±±å£ã€‚", link: "åŠæ½­å±±è¦ªå±±æ­¥é“ç™»å±±å£", mode: "sunny" },
            { start: "16:30", end: "16:40", title: "èµ·ç™»æ•´å‚™", loc: "ç™»å±±å£", type: "prep", action: "ç¶é ­é«®ã€ç¢ºèªè£å‚™ã€‚", rule: "ææ—©èµ·ç™»ï¼Œä¸è¶•è·¯ã€‚", link: "åŠæ½­å±±è¦ªå±±æ­¥é“ç™»å±±å£", mode: "sunny" },
            { start: "16:40", end: "17:00", title: "ç™»å±±ä¸Šè¡Œ", loc: "åŠæ½­å±±", type: "act", action: "ç©©æ­¥ä¸Šè¡Œè‡³å¾®é¢¨å¹³å°ã€‚", rule: "ç›®æ¨™ï¼š17:00 å‰æŠµé”ã€‚", link: "å¾®é¢¨å¹³å°", mode: "sunny" },
            { start: "17:00", end: "17:45", title: "æ£®æ—æ–¹èˆŸ (å¤•é™½)", loc: "è§€æ™¯å°", type: "hard", action: "æ•æ‰ Golden Hour (17:00-17:30)ã€‚", rule: "å®Œç¾è¦†è“‹æœ€ç¾å…‰ç·šã€‚", link: "æ£®æ—æ–¹èˆŸ", special: "sunset", mode: "sunny" },
            
            // é›¨å¤©å‚™æ¡ˆ
            { start: "16:15", end: "17:30", title: "å°åŒ—ç¾è¡“é¤¨", loc: "åœ“å±±", type: "relax", action: "èº²é›¨ã€å¹å†·æ°£ã€çœ‹å±•ã€‚", rule: "é›¨å¤©ä¸å»åŠæ½­å±±ã€‚", link: "å°åŒ—ç¾è¡“é¤¨", mode: "rain" },
            { start: "17:30", end: "17:45", title: "ç§»å‹•è‡³åŠæ½­", loc: "æ·é‹", type: "move", action: "åœ“å±±â†’åŠæ½­ï¼Œæº–å‚™æ™šé¤ã€‚", rule: "æ…¢æ…¢ç§»å‹•å³å¯ã€‚", link: "åŠæ½­ç«™", mode: "rain" },

            // æ™šé¤ (Common)
            { start: "17:45", end: "END", title: "æ™šé¤ï¼šé•·ç”Ÿå¡©äºº", loc: "åŠæ½­", type: "food", action: "ç™»è¨˜å€™ä½ (åªæ”¶ç¾é‡‘)ã€‚", rule: "è‹¥ç­‰å¤ªä¹…ï¼šå»å£«æ—å¤œå¸‚è²·é›æ’å¢Šèƒƒã€‚", link: "é•·ç”Ÿå¡©äººåŠæ½­", blog: "https://www.jeremyfoodie.tw/the-salt-ramen-jiantan/" }
        ];

        const spotsData = [
            { title: "èª å“ R79", tag: "é€›è¡—", time: "12:20", desc: "åœ°ä¸‹æ›¸è¡—ï¼Œå†·æ°£é–‹æ”¾ã€‚", link: "èª å“R79", bg: "hover:border-rose-200" },
            { title: "å…‰é»å°åŒ—", tag: "é€›è¡—", time: "12:20", desc: "ç™½è‰²æ´‹æˆ¿ï¼Œåº­åœ’å¥½æ‹ã€‚", link: "å…‰é»å°åŒ—", bg: "hover:border-rose-200" },
            { title: "é­šå…µè¡›", tag: "åˆé¤", time: "11:30", desc: "èµ¤å³°è¡—å··å¼„äººæ°£æ—¥æ–™ã€‚", link: "é­šå…µè¡›å¤ªæ˜¥å’Œé£Ÿè™•", bg: "hover:border-orange-200" },
            { title: "ç´…ç¥è²“è—å»Š", tag: "è²“å’–", time: "13:30", desc: "ç¡¬æ™‚é»ï¼Œæº–æ™‚å…¥å ´ã€‚", link: "ç´…ç¥ç·¬å› è²“è—å»Š", bg: "hover:border-rose-300" },
            { title: "å†°å±±äº”è§’", tag: "ç”œé»", time: "15:30", desc: "ææ—©åƒï¼Œå¡«è£œç©ºæª”ã€‚", link: "å†°å±±äº”è§’", bg: "hover:border-pink-300" },
            { title: "æ£®æ—æ–¹èˆŸ", tag: "å¤•é™½", time: "17:00", desc: "ææ—©åˆ°ï¼ŒæŠ“é»ƒé‡‘å…‰ç·šã€‚", link: "æ£®æ—æ–¹èˆŸ", bg: "hover:border-orange-300" }
        ];

        const extrasData = {
            zhongshan: [
                {name:"èª å“ R79", desc:"æ›¸é¦™å†·æ°£", icon: "ğŸ“š"}, 
                {name:"å…‰é»å°åŒ—", desc:"ç¾ç…§æ´‹æˆ¿", icon: "ğŸ“·"}, 
                {name:"èµ¤å³°è¡—", desc:"æ–‡å‰µå°åº—", icon: "â˜•"}, 
                {name:"æ–°å…‰ä¸‰è¶Š", desc:"è£œçµ¦æ©Ÿèƒ½", icon: "ğŸ›ï¸"}
            ],
            yuanshan: [
                {name:"MAJI é›†é£Ÿè¡Œæ¨‚", desc:"ç•°åœ‹å¸‚é›†", icon: "ğŸº"}, 
                {name:"åŒ—ç¾é¤¨", desc:"èº²é›¨çœ‹å±•", icon: "ğŸ–¼ï¸"}, 
                {name:"èŠ±åšå…¬åœ’", desc:"è‰åœ°æ•£æ­¥", icon: "ğŸŒ³"}
            ],
            jiantan: [
                {name:"åŒ—è—ä¸­å¿ƒ", desc:"çƒåŠ‡å ´å»ºç¯‰", icon: "ğŸ­"}, 
                {name:"å£«æ—å¤œå¸‚", desc:"æ™šé¤å¾Œé€›", icon: "ğŸ—"}, 
                {name:"åŠæ½­å…¬åœ’", desc:"ç™»å±±å£æ—", icon: "â›²"}
            ]
        };

        // --- Functions ---
        function getMapLink(query) {
             return `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(query)}`;
        }

        function toggleWeather() {
            isRainMode = !isRainMode;
            const btn = document.getElementById('weather-btn');
            
            if (isRainMode) {
                btn.innerHTML = '<span>ğŸŒ§ï¸ é›¨å¤©æ¨¡å¼</span>';
                btn.className = "flex items-center gap-2 px-4 py-1.5 rounded-full text-xs font-bold bg-slate-600 text-white shadow-sm hover:bg-slate-700 transition";
            } else {
                btn.innerHTML = '<span>â˜€ï¸ æ™´å¤©æ¨¡å¼</span>';
                btn.className = "flex items-center gap-2 px-4 py-1.5 rounded-full text-xs font-bold bg-white text-stone-600 border border-stone-200 shadow-sm hover:shadow-md hover:text-rose-500 transition";
            }
            renderTimeline();
        }

        function copyItinerary() {
            let text = "ğŸ“… ä¸­å±±åŠæ½­ä¸€æ—¥éŠ (Romantic)\n\n";
            itineraryData.forEach(item => {
                if (item.mode === 'rain' && !isRainMode) return;
                if (item.mode === 'sunny' && isRainMode) return;
                text += `${item.start} ${item.title}\nğŸ“ ${item.loc} | ğŸ’¡ ${item.action}\n\n`;
            });
            text += "Trip Planner v15.2";
            
            navigator.clipboard.writeText(text).then(() => {
                alert("âœ¨ è¡Œç¨‹å·²è¤‡è£½åˆ°å‰ªè²¼ç°¿");
            });
        }

        function renderTimeline() {
            const tlContainer = document.getElementById('timeline-content');
            tlContainer.innerHTML = '<div class="timeline-line"></div>';

            itineraryData.forEach((item, index) => {
                if (item.mode === 'rain' && !isRainMode) return;
                if (item.mode === 'sunny' && isRainMode) return;

                let s = { icon: 'ğŸ“', color: 'border-stone-300', bg: 'bg-white' };
                if (item.type === 'food') s = { icon: 'ğŸ¥¢', color: 'border-orange-200', bg: 'bg-orange-50/30' };
                if (item.type === 'prep') s = { icon: 'ğŸ’', color: 'border-rose-200', bg: 'bg-rose-50/30' };
                if (item.type === 'hard') s = { icon: 'â˜…', color: 'border-rose-400', bg: 'bg-rose-50/50' };
                if (item.type === 'relax') s = { icon: 'â˜•', color: 'border-sky-200', bg: 'bg-sky-50/30' };
                
                let tagHTML = '';
                if(item.type === 'hard') tagHTML = '<span class="tag-base bg-rose-100 text-rose-600 ml-2">ä¸å¯å‹•</span>';
                if(item.type === 'relax') tagHTML = '<span class="tag-base bg-sky-100 text-sky-600 ml-2">æ¨è–¦</span>';
                if(item.mode === 'rain') tagHTML = '<span class="tag-base bg-slate-100 text-slate-500 ml-2">é›¨å‚™</span>';

                let recHTML = '';
                if(item.recs) {
                    recHTML = `<div class="mt-4 flex flex-wrap gap-2">
                        ${item.recs.map(r => `<a href="${getMapLink(r.link)}" target="_blank" class="px-3 py-1 rounded-full text-[11px] font-bold bg-white text-stone-500 border border-stone-200 hover:border-rose-300 hover:text-rose-500 transition shadow-sm">ğŸ“ ${r.name}</a>`).join('')}
                    </div>`;
                }
                
                // Add Blog Button if exists
                let blogHTML = '';
                if(item.blog) {
                    blogHTML = `<div class="mt-3">
                        <a href="${item.blog}" target="_blank" class="blog-btn">
                            ğŸ“ å¿…çœ‹é£Ÿè¨˜
                        </a>
                    </div>`;
                }

                const extraClass = item.special === 'sunset' ? 'border-l-4 border-l-rose-400 bg-gradient-to-r from-rose-50/80 to-transparent' : '';
                const isLeft = index % 2 === 0;
                const rowClass = isLeft ? 'md:flex-row-reverse' : 'md:flex-row';
                const alignClass = isLeft ? 'md:text-right' : 'md:text-left';

                const html = `
                <div class="relative flex items-stretch justify-between md:justify-center mb-10 w-full group reveal">
                    <div class="absolute left-[28px] md:left-1/2 w-9 h-9 rounded-full bg-white border-2 ${s.color} z-10 transform -translate-x-1/2 flex items-center justify-center text-sm shadow-sm text-stone-500 font-serif">
                        ${s.icon}
                    </div>
                    <div class="flex w-full md:w-1/2 pl-20 md:pl-0 ${rowClass}">
                        <div class="w-full md:px-12">
                            <div class="glass-card rounded-2xl p-6 ${extraClass}">
                                <div class="flex flex-col ${alignClass} mb-3 border-b border-stone-100 pb-2">
                                    <span class="font-bold text-lg text-stone-700 font-serif italic">${item.start} - ${item.end}</span>
                                    <div class="flex items-center ${isLeft ? 'justify-end' : 'justify-start'} mt-1 gap-2">
                                        <span class="text-[10px] font-bold text-stone-400 bg-stone-50 px-2 py-0.5 rounded border border-stone-100 font-sans tracking-wide">${item.loc}</span>
                                        ${tagHTML}
                                    </div>
                                </div>
                                <h3 class="text-xl font-bold text-stone-800 mb-2 ${alignClass} font-serif">
                                    <a href="${getMapLink(item.link)}" target="_blank" class="hover:text-rose-500 transition-colors flex items-center gap-2 ${isLeft ? 'justify-end' : 'justify-start'}">
                                        ${item.title} 
                                        <span class="text-xs opacity-40">â†—</span>
                                    </a>
                                </h3>
                                <p class="text-sm text-stone-600 font-medium mb-2 font-sans leading-relaxed">ğŸ’¡ ${item.action}</p>
                                <p class="text-xs text-rose-500 font-bold tracking-wide font-sans">${item.rule}</p>
                                ${recHTML}
                                ${blogHTML}
                            </div>
                        </div>
                    </div>
                </div>`;
                tlContainer.insertAdjacentHTML('beforeend', html);
            });
            observeScroll();
        }

        function renderStatic() {
            const grid = document.getElementById('food-grid');
            if(grid) {
                grid.innerHTML = '';
                spotsData.forEach(spot => {
                    const html = `
                    <a href="${getMapLink(spot.link)}" target="_blank" class="block glass-card rounded-2xl p-6 ${spot.bg} group">
                        <div class="flex justify-between items-start mb-4">
                            <span class="text-[10px] font-bold text-stone-400 border border-stone-100 bg-white px-2 py-1 rounded-full">${spot.tag}</span>
                            <span class="text-xs font-bold text-rose-400 font-serif italic">${spot.time}</span>
                        </div>
                        <h3 class="text-xl font-bold text-stone-800 mb-2 group-hover:text-rose-500 transition-colors font-serif">${spot.title}</h3>
                        <p class="text-sm text-stone-500 leading-relaxed font-sans font-light">${spot.desc}</p>
                    </a>`;
                    grid.insertAdjacentHTML('beforeend', html);
                });
            }

            const renderArea = (id, data, colorClass) => {
                const el = document.getElementById(id);
                if (!el) return;
                el.innerHTML = ''; 

                const colors = {
                    'rose': 'text-rose-800 group-hover:text-rose-600',
                    'orange': 'text-orange-800 group-hover:text-orange-600',
                    'indigo': 'text-indigo-800 group-hover:text-indigo-600'
                };

                data.forEach(item => {
                    const html = `
                    <a href="${getMapLink(item.name)}" target="_blank" class="flex items-center justify-between p-3 rounded-xl hover:bg-white/50 transition group border border-transparent hover:border-white/60">
                        <div class="flex items-center gap-4">
                            <span class="text-xl opacity-70">${item.icon}</span>
                            <div class="flex flex-col">
                                <span class="text-sm font-bold ${colors[colorClass]} transition-colors font-serif tracking-wide">${item.name}</span>
                                <span class="text-[10px] text-stone-400 font-sans">${item.desc}</span>
                            </div>
                        </div>
                        <span class="opacity-0 group-hover:opacity-100 transition-opacity text-xs text-stone-400">â†—</span>
                    </a>`;
                    el.insertAdjacentHTML('beforeend', html);
                });
            };

            renderArea('extra-zhongshan', extrasData.zhongshan, 'rose');
            renderArea('extra-yuanshan', extrasData.yuanshan, 'orange');
            renderArea('extra-jiantan', extrasData.jiantan, 'indigo');
        }

        function observeScroll() {
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => { if (entry.isIntersecting) entry.target.classList.add('active'); });
            }, { threshold: 0.1 });
            document.querySelectorAll('.reveal').forEach(el => observer.observe(el));
        }

        window.addEventListener('scroll', () => {
            const btn = document.getElementById('back-to-top');
            if(window.scrollY > 300) btn.classList.add('show'); else btn.classList.remove('show');
        });

        window.addEventListener('DOMContentLoaded', () => {
            renderTimeline();
            renderStatic();
        });

    </script>
</body>
</html>

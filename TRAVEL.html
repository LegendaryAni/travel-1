<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¸­å±±åŠæ½­ï½œä¸€æ—¥ç²¾æº–è¡Œç¨‹ (UIç¾åŒ–ç‰ˆ)</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700;900&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #fff1f2;
            color: #334155;
            background-image: linear-gradient(to bottom, #fff1f2 0%, #fff7ed 100%);
            scroll-behavior: smooth;
        }

        /* Timeline Style */
        .timeline-line {
            position: absolute;
            left: 28px;
            top: 24px;
            bottom: 24px;
            width: 3px;
            background: #cbd5e1;
            z-index: 0;
            border-radius: 99px;
        }

        @media (min-width: 768px) {
            .timeline-line {
                left: 50%;
                transform: translateX(-50%);
            }
        }

        /* Interactions */
        .card-hover { transition: transform 0.2s ease, box-shadow 0.2s ease; }
        .card-hover:hover { transform: translateY(-4px); box-shadow: 0 10px 20px -5px rgba(244, 63, 94, 0.15); border-color: #fda4af; }

        /* Tags */
        .tag-base { font-size: 0.7rem; font-weight: 700; padding: 2px 8px; border-radius: 4px; display: inline-block; }
        .tag-hard { background-color: #be123c; color: white; }
        .tag-rec { background-color: #0ea5e9; color: white; }
        .tag-rain { background-color: #64748b; color: white; }

        /* Animation */
        .reveal { opacity: 0; transform: translateY(20px); transition: all 0.6s ease-out; }
        .reveal.active { opacity: 1; transform: translateY(0); }

        /* Back to Top */
        #back-to-top { opacity: 0; visibility: hidden; transition: all 0.3s ease; }
        #back-to-top.show { opacity: 1; visibility: visible; }

        /* Checklist Styles */
        .checklist-group h3 { color: #881337; font-size: 0.85rem; font-weight: 700; margin-bottom: 0.5rem; text-transform: uppercase; letter-spacing: 0.05em; }
        .checklist-item { display: flex; align-items: center; gap: 0.5rem; padding: 0.25rem 0; font-size: 0.9rem; color: #475569; cursor: pointer; }
        .checklist-item input { accent-color: #f43f5e; width: 1rem; height: 1rem; }

        /* Extra List Styling (Pocket List) */
        .pocket-card { background: white; border-radius: 12px; padding: 12px; transition: all 0.2s; border: 1px solid transparent; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
        .pocket-card:hover { transform: scale(1.02); border-color: currentColor; box-shadow: 0 5px 15px rgba(0,0,0,0.08); }
    </style>
</head>
<body class="antialiased selection:bg-rose-200 selection:text-rose-900 pb-20">

    <nav class="bg-white/95 backdrop-blur-sm sticky top-0 z-50 border-b border-rose-100 shadow-sm">
        <div class="max-w-5xl mx-auto px-4 sm:px-6">
            <div class="flex justify-between items-center h-14">
                <div class="flex items-center gap-2 cursor-pointer" onclick="window.scrollTo(0,0)">
                    <div class="w-8 h-8 bg-rose-500 rounded-lg flex items-center justify-center text-white font-bold shadow-sm">P</div>
                    <div>
                        <h1 class="font-bold text-base text-slate-800 leading-none">ä¸­å±±åŠæ½­ç²¾æº–è¡Œç¨‹</h1>
                        <p class="text-[10px] text-slate-500 font-mono mt-0.5">VER 14.0 (UI Upgrade)</p>
                    </div>
                </div>
                <div class="flex items-center gap-2">
                    <button id="weather-btn" onclick="toggleWeather()" class="flex items-center gap-1 px-3 py-1.5 rounded-full text-xs font-bold bg-amber-100 text-amber-700 hover:bg-amber-200 transition border border-amber-200">
                        <span>â˜€ï¸ æ™´å¤©æ¨¡å¼</span>
                    </button>
                    <button onclick="copyItinerary()" class="hidden md:flex items-center gap-1 px-3 py-1.5 rounded-full text-xs font-bold bg-slate-100 text-slate-600 hover:bg-slate-200 transition border border-slate-200">
                        <span>ğŸ“‹ è¤‡è£½</span>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <section id="prep" class="py-6 max-w-5xl mx-auto px-4">
        <div class="bg-white rounded-2xl p-6 shadow-sm border border-slate-200 reveal active">
            <h2 class="text-xl font-bold text-slate-800 mb-4 flex items-center gap-2 border-b border-slate-100 pb-2">
                <span class="text-rose-500">ğŸ’</span> å‡ºç™¼å‰æª¢æŸ¥æ¸…å–®
            </h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                
                <div class="checklist-group bg-rose-50 p-4 rounded-xl border border-rose-100">
                    <h3>ğŸ”´ çµ•å°å¿…å‚™</h3>
                    <label class="checklist-item"><input type="checkbox"> ç¾é‡‘ (ç™¾å…ƒéˆ”/æ‹‰éºµåº—ç”¨)</label>
                    <label class="checklist-item"><input type="checkbox"> è¥ªå­ (è²“å’–è¦å®š)</label>
                    <label class="checklist-item"><input type="checkbox"> æ‚ éŠå¡ (ä¸”æœ‰éŒ¢)</label>
                    <label class="checklist-item"><input type="checkbox"> è¡Œå‹•é›»æº + ç·š</label>
                </div>

                <div class="checklist-group bg-sky-50 p-4 rounded-xl border border-sky-100">
                    <h3>ğŸ”µ æˆ¶å¤–æ©Ÿèƒ½</h3>
                    <label class="checklist-item"><input type="checkbox"> é˜²æ»‘å¥½èµ°çš„é‹</label>
                    <label class="checklist-item"><input type="checkbox"> æ‘ºç–Šå‚˜ (é›¨å‚™)</label>
                    <label class="checklist-item"><input type="checkbox"> è–„å¤–å¥— (å±±é ‚é¢¨å¤§)</label>
                </div>

                <div class="checklist-group bg-amber-50 p-4 rounded-xl border border-amber-100">
                    <h3>ğŸŸ¡ è²¼å¿ƒåŠ åˆ†</h3>
                    <label class="checklist-item"><input type="checkbox"> æ¿•ç´™å·¾ (æµæ±—ç”¨)</label>
                    <label class="checklist-item"><input type="checkbox"> é¢ç´™</label>
                    <label class="checklist-item"><input type="checkbox"> æ°´ (å‡ºç™¼å‰è²·å¥½)</label>
                </div>

            </div>
        </div>
    </section>

    <section id="timeline" class="py-4 max-w-5xl mx-auto px-4">
        <div class="flex items-center justify-between mb-8 px-2 reveal">
            <h2 class="text-2xl font-bold text-slate-800">ä»Šæ—¥æµç¨‹</h2>
            <div class="text-xs font-bold text-rose-600 bg-rose-50 border border-rose-200 px-3 py-1 rounded-full">
                æ—¥è½ S = 17:28
            </div>
        </div>
        <div class="timeline-container relative pb-8" id="timeline-content">
            <div class="timeline-line"></div>
            </div>
    </section>

    <section id="food" class="py-12 bg-white border-t border-rose-50">
        <div class="max-w-6xl mx-auto px-6">
            <h2 class="text-2xl font-bold text-slate-800 mb-6 text-center">å…¨åœ°åœ–å°èˆª</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6" id="food-grid">
                </div>
        </div>
    </section>

    <section id="extras" class="py-12 bg-slate-50 border-t border-slate-200">
        <div class="max-w-6xl mx-auto px-6">
            <div class="text-center mb-10 reveal">
                <span class="text-xs font-bold text-slate-400 tracking-widest uppercase">POCKET LIST</span>
                <h2 class="text-2xl font-bold text-slate-800 mt-1">ç©ºæª”å‚™æ¡ˆå€</h2>
                <p class="text-sm text-slate-500 mt-2">ææ—©çµæŸæˆ–éœ€è¦å¹å†·æ°£æ™‚ä½¿ç”¨ï¼Œé»æ“Šå¯ç›´æ¥å°èˆª</p>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                
                <div class="bg-gradient-to-br from-rose-50 to-pink-100 rounded-2xl p-6 shadow-sm border border-rose-200 reveal relative overflow-hidden">
                    <div class="absolute -right-4 -top-4 text-9xl text-rose-200 opacity-20 select-none">ğŸ›ï¸</div>
                    <h3 class="text-lg font-bold text-rose-600 mb-4 flex items-center gap-2 relative z-10">
                        <span class="bg-white p-1 rounded-md shadow-sm">ğŸš‡</span> ä¸­å±±ç«™
                    </h3>
                    <div class="space-y-3 relative z-10" id="extra-zhongshan"></div>
                </div>

                <div class="bg-gradient-to-br from-amber-50 to-orange-100 rounded-2xl p-6 shadow-sm border border-orange-200 reveal relative overflow-hidden">
                    <div class="absolute -right-4 -top-4 text-9xl text-orange-200 opacity-20 select-none">ğŸ¨</div>
                    <h3 class="text-lg font-bold text-orange-600 mb-4 flex items-center gap-2 relative z-10">
                        <span class="bg-white p-1 rounded-md shadow-sm">ğŸ¡</span> åœ“å±±ç«™
                    </h3>
                    <div class="space-y-3 relative z-10" id="extra-yuanshan"></div>
                </div>

                <div class="bg-gradient-to-br from-slate-50 to-indigo-100 rounded-2xl p-6 shadow-sm border border-indigo-200 reveal relative overflow-hidden">
                     <div class="absolute -right-4 -top-4 text-9xl text-indigo-200 opacity-20 select-none">ğŸ­</div>
                    <h3 class="text-lg font-bold text-indigo-600 mb-4 flex items-center gap-2 relative z-10">
                        <span class="bg-white p-1 rounded-md shadow-sm">ğŸŒƒ</span> åŠæ½­/å£«æ—
                    </h3>
                    <div class="space-y-3 relative z-10" id="extra-jiantan"></div>
                </div>

            </div>
        </div>
    </section>

    <footer class="bg-slate-800 text-slate-400 py-12 text-center">
        <p class="text-xs font-bold tracking-widest uppercase mb-1">Trip Planner v14.0</p>
        <p class="text-[10px] text-slate-600">Final Release with UI Enhancements</p>
    </footer>

    <button id="back-to-top" onclick="window.scrollTo(0,0)" class="fixed bottom-6 right-6 bg-rose-500 text-white p-3 rounded-full shadow-lg hover:bg-rose-600 transition z-50">â†‘</button>

    <script>
        let isRainMode = false;

        // --- Data Definitions ---

        const itineraryData = [
            { start: "11:00", end: "11:10", title: "é›†åˆ & æ•´å‚™", loc: "ä¸­å±±å—è¥¿", type: "prep", action: "é€²ç™¾è²¨æ´—æ‰‹é–“æ•´ç†å„€å®¹ã€è²·æ°´ã€‚", rule: "ä¸‹åˆåªåšå°è£œï¼Œå‹¿ç©ºç­‰ã€‚", link: "ä¸­å±±å—è¥¿+ç™¾è²¨" },
            { start: "11:10", end: "11:15", title: "å‰å¾€å¹³æˆåä¹", loc: "ç§»å‹•", type: "move", action: "ç›´å¥”åº—é–€å£æ’éšŠã€‚", rule: "ğŸ”¥ ææ—©5åˆ†é˜ï¼Œä¿è­‰ç¬¬ä¸€è¼ªã€‚", link: "å¹³æˆåä¹" },
            { start: "11:15", end: "12:20", title: "åˆé¤ï¼šå¹³æˆåä¹", loc: "ä¸­å±±", type: "food", action: "è²©è³£æ©Ÿé»é¤ (å‚™å¥½ç™¾å…ƒéˆ”)ã€‚", rule: "12:20 çµå¸³é›¢å ´ã€‚", link: "å¹³æˆåä¹" },
            { start: "12:20", end: "13:05", title: "æ–‡è—æ¼«æ­¥ (å†·æ°£)", loc: "ä¸­å±±å‘¨é‚Š", type: "relax", action: "æ¨è–¦å»èª å“ R79 æˆ–å…‰é»å°åŒ—ã€‚", rule: "å–„ç”¨ç©ºæª”ï¼Œä¿æŒæ¶¼çˆ½ã€‚", link: "èª å“R79", recs: [{name:"èª å“R79", link:"èª å“R79"}, {name:"å…‰é»å°åŒ—", link:"å…‰é»å°åŒ—"}] },
            { start: "13:05", end: "13:25", title: "å‰å¾€ç´…ç¥", loc: "ç§»å‹•", type: "move", action: "æ…¢æ…¢èµ°åˆ°è²“å’–é™„è¿‘ã€‚", rule: "13:25 å¿…åˆ°é–€å£å¾…å‘½ã€‚", link: "ç´…ç¥ç·¬å› è²“è—å»Š" },
            { start: "13:30", end: "15:00", title: "ç´…ç¥ç·¬å› è²“è—å»Š", loc: "ä¸­å±±", type: "hard", action: "ç©¿è¥ªå­å…¥å ´ï¼Œç›¡æƒ…åš•è²“ã€‚", rule: "ç¡¬æ™‚é»ï¼Œ15:00 æº–æ™‚é›¢å ´ã€‚", link: "ç´…ç¥ç·¬å› è²“è—å»Š" },
            { start: "15:00", end: "15:30", title: "ç§»å‹•è‡³åœ“å±±", loc: "æ·é‹", type: "move", action: "ä¸­å±±ç«™â†’åœ“å±±ç«™â†’å†°å±±äº”è§’ã€‚", rule: "å¡«è£œç©ºæª”ï¼Œç›´æ¥åƒç”œé»ã€‚", link: "åœ“å±±ç«™" },
            { start: "15:30", end: "16:15", title: "å†°å±±äº”è§’", loc: "åœ“å±±", type: "food", action: "æ‚ é–’äº«ç”¨ç”œé»ã€‚", rule: "é¿é–‹å°–å³°ï¼Œç‚ºçˆ¬å±±å„²èƒ½ã€‚", link: "å†°å±±äº”è§’" },
            
            // --- åˆ†æ­§é» (Sunny vs Rain) ---
            { start: "16:15", end: "16:30", title: "ç§»å‹•è‡³åŠæ½­", loc: "æ·é‹", type: "move", action: "åœ“å±±â†’åŠæ½­â†’ç™»å±±å£ã€‚", rule: "16:30 æŠµé”ç™»å±±å£ã€‚", link: "åŠæ½­å±±è¦ªå±±æ­¥é“ç™»å±±å£", mode: "sunny" },
            { start: "16:30", end: "16:40", title: "èµ·ç™»æ•´å‚™", loc: "ç™»å±±å£", type: "prep", action: "ç¶é ­é«®ã€ç¢ºèªè£å‚™ã€‚", rule: "ææ—©èµ·ç™»ï¼Œä¸è¶•è·¯ã€‚", link: "åŠæ½­å±±è¦ªå±±æ­¥é“ç™»å±±å£", mode: "sunny" },
            { start: "16:40", end: "17:00", title: "ç™»å±±ä¸Šè¡Œ", loc: "åŠæ½­å±±", type: "act", action: "ç©©æ­¥ä¸Šè¡Œè‡³å¾®é¢¨å¹³å°ã€‚", rule: "ç›®æ¨™ï¼š17:00 å‰æŠµé”ã€‚", link: "å¾®é¢¨å¹³å°", mode: "sunny" },
            { start: "17:00", end: "17:45", title: "æ£®æ—æ–¹èˆŸ (å¤•é™½)", loc: "è§€æ™¯å°", type: "hard", action: "æ•æ‰ Golden Hour (17:00-17:30)ã€‚", rule: "å®Œç¾è¦†è“‹æœ€ç¾å…‰ç·šã€‚", link: "æ£®æ—æ–¹èˆŸ", special: "sunset", mode: "sunny" },
            
            // é›¨å¤©å‚™æ¡ˆ
            { start: "16:15", end: "17:30", title: "å°åŒ—ç¾è¡“é¤¨", loc: "åœ“å±±", type: "relax", action: "èº²é›¨ã€å¹å†·æ°£ã€çœ‹å±•ã€‚", rule: "é›¨å¤©ä¸å»åŠæ½­å±±ã€‚", link: "å°åŒ—ç¾è¡“é¤¨", mode: "rain" },
            { start: "17:30", end: "17:45", title: "ç§»å‹•è‡³åŠæ½­", loc: "æ·é‹", type: "move", action: "åœ“å±±â†’åŠæ½­ï¼Œæº–å‚™æ™šé¤ã€‚", rule: "æ…¢æ…¢ç§»å‹•å³å¯ã€‚", link: "åŠæ½­ç«™", mode: "rain" },

            // æ™šé¤ (Common)
            { start: "17:45", end: "END", title: "æ™šé¤ï¼šé•·ç”Ÿå¡©äºº", loc: "åŠæ½­", type: "food", action: "ç™»è¨˜å€™ä½ (åªæ”¶ç¾é‡‘)ã€‚", rule: "è‹¥ç­‰å¤ªä¹…ï¼šå»å£«æ—å¤œå¸‚è²·é›æ’å¢Šèƒƒã€‚", link: "é•·ç”Ÿå¡©äººåŠæ½­" }
        ];

        const spotsData = [
            { title: "èª å“ R79", tag: "é€›è¡—", time: "12:20", desc: "åœ°ä¸‹æ›¸è¡—ï¼Œå†·æ°£é–‹æ”¾ã€‚", link: "èª å“R79", bg: "bg-sky-50" },
            { title: "å…‰é»å°åŒ—", tag: "é€›è¡—", time: "12:20", desc: "ç™½è‰²æ´‹æˆ¿ï¼Œåº­åœ’å¥½æ‹ã€‚", link: "å…‰é»å°åŒ—", bg: "bg-sky-50" },
            { title: "å¹³æˆåä¹", tag: "åˆé¤", time: "11:15", desc: "ææ—©5åˆ†é˜é¿æ’éšŠã€‚", link: "å¹³æˆåä¹", bg: "bg-orange-50" },
            { title: "ç´…ç¥è²“è—å»Š", tag: "è²“å’–", time: "13:30", desc: "ç¡¬æ™‚é»ï¼Œæº–æ™‚å…¥å ´ã€‚", link: "ç´…ç¥ç·¬å› è²“è—å»Š", bg: "bg-rose-50" },
            { title: "å†°å±±äº”è§’", tag: "ç”œé»", time: "15:30", desc: "ææ—©åƒï¼Œå¡«è£œç©ºæª”ã€‚", link: "å†°å±±äº”è§’", bg: "bg-pink-50" },
            { title: "æ£®æ—æ–¹èˆŸ", tag: "å¤•é™½", time: "17:00", desc: "ææ—©åˆ°ï¼ŒæŠ“é»ƒé‡‘å…‰ç·šã€‚", link: "æ£®æ—æ–¹èˆŸ", bg: "bg-indigo-50" }
        ];

        const extrasData = {
            zhongshan: [
                {name:"èª å“ R79", desc:"æ›¸é¦™å†·æ°£", icon: "ğŸ“š"}, 
                {name:"å…‰é»å°åŒ—", desc:"ç¾ç…§æ´‹æˆ¿", icon: "ğŸ“·"}, 
                {name:"èµ¤å³°è¡—", desc:"æ–‡å‰µå°åº—", icon: "â˜•"}, 
                {name:"æ–°å…‰ä¸‰è¶Š", desc:"è£œçµ¦æ©Ÿèƒ½", icon: "ğŸ›ï¸"}
            ],
            yuanshan: [
                {name:"MAJI é›†é£Ÿè¡Œæ¨‚", desc:"ç•°åœ‹å¸‚é›†", icon: "ğŸº"}, 
                {name:"åŒ—ç¾é¤¨", desc:"èº²é›¨çœ‹å±•", icon: "ğŸ–¼ï¸"}, 
                {name:"èŠ±åšå…¬åœ’", desc:"è‰åœ°æ•£æ­¥", icon: "ğŸŒ³"}
            ],
            jiantan: [
                {name:"åŒ—è—ä¸­å¿ƒ", desc:"çƒåŠ‡å ´å»ºç¯‰", icon: "ğŸ­"}, 
                {name:"å£«æ—å¤œå¸‚", desc:"æ™šé¤å¾Œé€›", icon: "ğŸ—"}, 
                {name:"åŠæ½­å…¬åœ’", desc:"ç™»å±±å£æ—", icon: "â›²"}
            ]
        };

        // --- Functions ---

        function getMapLink(query) {
             return `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(query)}`;
        }

        function toggleWeather() {
            isRainMode = !isRainMode;
            const btn = document.getElementById('weather-btn');
            
            if (isRainMode) {
                btn.innerHTML = '<span>ğŸŒ§ï¸ é›¨å¤©æ¨¡å¼</span>';
                btn.className = "flex items-center gap-1 px-3 py-1.5 rounded-full text-xs font-bold bg-slate-600 text-white hover:bg-slate-700 transition border border-slate-600";
            } else {
                btn.innerHTML = '<span>â˜€ï¸ æ™´å¤©æ¨¡å¼</span>';
                btn.className = "flex items-center gap-1 px-3 py-1.5 rounded-full text-xs font-bold bg-amber-100 text-amber-700 hover:bg-amber-200 transition border border-amber-200";
            }
            renderTimeline();
        }

        function copyItinerary() {
            let text = "ğŸ“… ä¸­å±±åŠæ½­ä¸€æ—¥éŠ (ç²¾æº–ç‰ˆ)\n\n";
            itineraryData.forEach(item => {
                if (item.mode === 'rain' && !isRainMode) return;
                if (item.mode === 'sunny' && isRainMode) return;
                text += `${item.start} ${item.title}\nğŸ“ ${item.loc} | ğŸ’¡ ${item.action}\n\n`;
            });
            text += "Trip Planner v14.0";
            
            navigator.clipboard.writeText(text).then(() => {
                alert("âœ… è¡Œç¨‹å·²è¤‡è£½ï¼è«‹ç›´æ¥è²¼ä¸Š Line æˆ–ç­†è¨˜æœ¬ã€‚");
            });
        }

        function renderTimeline() {
            const tlContainer = document.getElementById('timeline-content');
            tlContainer.innerHTML = '<div class="timeline-line"></div>';

            itineraryData.forEach((item, index) => {
                if (item.mode === 'rain' && !isRainMode) return;
                if (item.mode === 'sunny' && isRainMode) return;

                let s = { icon: 'ğŸ“', color: 'border-slate-300' };
                if (item.type === 'food') s = { icon: 'ğŸ¥¢', color: 'border-orange-400' };
                if (item.type === 'prep') s = { icon: 'ğŸ’', color: 'border-pink-300' };
                if (item.type === 'hard') s = { icon: 'â­', color: 'border-rose-500' };
                if (item.type === 'relax') s = { icon: 'â˜•', color: 'border-sky-400' };
                
                let tagHTML = '';
                if(item.type === 'hard') tagHTML = '<span class="tag-base tag-hard ml-2">ä¸å¯å‹•</span>';
                if(item.type === 'relax') tagHTML = '<span class="tag-base tag-rec ml-2">æ¨è–¦</span>';
                if(item.mode === 'rain') tagHTML = '<span class="tag-base tag-rain ml-2">é›¨å‚™</span>';

                let recHTML = '';
                if(item.recs) {
                    recHTML = `<div class="mt-3 flex flex-wrap gap-2">
                        ${item.recs.map(r => `<a href="${getMapLink(r.link)}" target="_blank" class="rec-btn">ğŸ“ ${r.name}</a>`).join('')}
                    </div>`;
                }

                const extraClass = item.special === 'sunset' ? 'bg-gradient-to-r from-orange-50 to-rose-50 border-l-orange-400' : 'bg-white';
                const isLeft = index % 2 === 0;
                const rowClass = isLeft ? 'md:flex-row-reverse' : 'md:flex-row';
                const alignClass = isLeft ? 'md:text-right' : 'md:text-left';

                const html = `
                <div class="relative flex items-stretch justify-between md:justify-center mb-8 w-full group reveal">
                    <div class="absolute left-[28px] md:left-1/2 w-10 h-10 rounded-full bg-white border-[3px] ${s.color} z-10 transform -translate-x-1/2 flex items-center justify-center text-lg shadow-sm">
                        ${s.icon}
                    </div>
                    <div class="flex w-full md:w-1/2 pl-20 md:pl-0 ${rowClass}">
                        <div class="w-full md:px-12">
                            <div class="${extraClass} border-l-4 ${s.color} rounded-lg shadow-sm p-4 card-hover">
                                <div class="flex flex-col ${alignClass} mb-2 border-b border-slate-100 pb-2">
                                    <span class="font-bold text-lg text-slate-800 font-mono">${item.start} - ${item.end}</span>
                                    <div class="flex items-center ${isLeft ? 'justify-end' : 'justify-start'} mt-1">
                                        <span class="text-xs font-bold text-slate-500 bg-slate-100 px-2 py-0.5 rounded">${item.loc}</span>
                                        ${tagHTML}
                                    </div>
                                </div>
                                <h3 class="text-lg font-bold text-slate-800 mb-2 ${alignClass}">
                                    <a href="${getMapLink(item.link)}" target="_blank" class="hover:text-rose-600 underline decoration-slate-200 underline-offset-4">${item.title}</a>
                                </h3>
                                <p class="text-sm text-slate-700 font-medium mb-1">ğŸ’¡ ${item.action}</p>
                                <p class="text-xs text-rose-600 font-bold">${item.rule}</p>
                                ${recHTML}
                            </div>
                        </div>
                    </div>
                </div>`;
                tlContainer.insertAdjacentHTML('beforeend', html);
            });
            
            observeScroll();
        }

        function renderStatic() {
            // Render Navigation Wall
            const grid = document.getElementById('food-grid');
            if(grid) {
                grid.innerHTML = '';
                spotsData.forEach(spot => {
                    const html = `
                    <a href="${getMapLink(spot.link)}" target="_blank" class="block bg-white rounded-xl border border-slate-200 p-5 card-hover ${spot.bg}">
                        <div class="flex justify-between items-start mb-2">
                            <span class="text-xs font-bold text-slate-500 border border-slate-200 bg-white px-2 py-1 rounded">${spot.tag}</span>
                            <span class="text-xs font-bold text-rose-600">${spot.time}</span>
                        </div>
                        <h3 class="text-lg font-bold text-slate-800 mb-1">${spot.title}</h3>
                        <p class="text-sm text-slate-600 leading-relaxed">${spot.desc}</p>
                    </a>`;
                    grid.insertAdjacentHTML('beforeend', html);
                });
            }

            // Render Extras (Pocket List)
            const renderArea = (id, data, colorClass) => {
                const el = document.getElementById(id);
                if (!el) return;
                el.innerHTML = ''; 

                data.forEach(item => {
                    const html = `
                    <a href="${getMapLink(item.name)}" target="_blank" class="pocket-card flex items-center justify-between text-${colorClass}-700 hover:text-${colorClass}-900 group">
                        <div class="flex items-center gap-3">
                            <span class="text-lg">${item.icon}</span>
                            <div class="flex flex-col">
                                <span class="text-sm font-bold">${item.name}</span>
                                <span class="text-[10px] text-slate-500 bg-white/50 px-1.5 rounded w-fit">${item.desc}</span>
                            </div>
                        </div>
                        <span class="opacity-0 group-hover:opacity-100 transition-opacity text-xs font-bold">GO â†—</span>
                    </a>`;
                    el.insertAdjacentHTML('beforeend', html);
                });
            };

            renderArea('extra-zhongshan', extrasData.zhongshan, 'rose');
            renderArea('extra-yuanshan', extrasData.yuanshan, 'orange');
            renderArea('extra-jiantan', extrasData.jiantan, 'indigo');
        }

        function observeScroll() {
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => { if (entry.isIntersecting) entry.target.classList.add('active'); });
            }, { threshold: 0.1 });
            document.querySelectorAll('.reveal').forEach(el => observer.observe(el));
        }

        window.addEventListener('scroll', () => {
            const btn = document.getElementById('back-to-top');
            if(window.scrollY > 300) btn.classList.add('show'); else btn.classList.remove('show');
        });

        // Main Entry Point
        window.addEventListener('DOMContentLoaded', () => {
            renderTimeline();
            renderStatic();
        });

    </script>
</body>
</html>